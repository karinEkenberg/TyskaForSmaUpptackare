@model TyskaForSmaUpptackare.Models.ProductItem

@{
    ViewData["Title"] = "Utforska Rum: " + Model.Name;
    var backgroundStyle = $"background-image: url('{Model.ImageUrl}'); background-size: cover; background-position: center;";
    ViewData["HideNavbar"] = true;
}
<section class="container">
    <h1 class="mt-5">@Model.Name</h1>
    <a class="mt-5 pt-5" href="#" onclick="history.back(); return false;" style="text-decoration:none; color:inherit;">
        <span><img src="~/svg/arrow-svgrepo-com.svg" alt="arrow" class="img-fluid" style="height: 50px; width:auto;" /></span>
    </a>
    <div class="room-background" style="@backgroundStyle; min-height: 100vh; padding: 20px;">

        <div class="row g-3">
            @foreach (var part in Model.Parts.Take(9))
            {
                <div class="col-4">
                    <div class="">
                        <img src="@part.ImageUrl" class="card-img-top" alt="@part.Name" style="cursor:pointer;"
                             tabindex="0" 
                             onkeydown="handleKeyPress(event, '@part.AudioUrl')"
                             onclick="playAudio('@part.AudioUrl')" />
                        <div class="card text-center">
                            <h5 class="card-title" style="cursor:pointer;" onclick="playAudio('@part.AudioUrl')">
                                @part.Name
                            </h5>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>


@section Scripts {
    <script>
            function playAudio(audioUrl) {
                if (audioUrl && audioUrl.trim() !== "") {
                    var audio = new Audio(audioUrl);
                    audio.play();
                }

        
            }

            function handleKeyPress(event, audioUrl) {
                if (event.key === "Enter" || event.key === " ") {  
                    playAudio(audioUrl);
                    event.preventDefault();  
                }
            }
    </script>
}
